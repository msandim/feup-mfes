class TestTrainLine is subclass of TestCase

operations  

	public testSimpleMovement: () ==> ()
	testSimpleMovement() ==
	(
		dcl line: TrainLine := TrainLineBuilder`buildMap1();
		dcl train1Orientation: Train`Orientation := line.getTrain("train1").getOrientation();
		
		-- Test if the train is in the station, with a red light before the station and after the station
		assertEqual(line.getTrain("train1").getCurrentBlock(), line.getModule("station1").getBlock(train1Orientation));
		assertEqual(<Red>, line.getTrain("train1").getCurrentBlock().getSemaphore(train1Orientation));
		assertEqual(<Red>, line.getTrain("train1").getCurrentBlock().getNextBlock(train1Orientation).getSemaphore(train1Orientation));
		
		-- If we ask to leave the station, the semaphore before the station goes __ and the after goes green	
		assertEqual(true, line.requestLeaveStation("train1"));
		assertEqual(<Green>, line.getTrain("train1").getCurrentBlock().getNextBlock(train1Orientation).getSemaphore(train1Orientation));
		
		line.moveTrain("train1");
		
		IO`println("Passed simple movement test");
	);

  public testAll: () ==> ()
  testAll() ==
  (
  	testSimpleMovement();
  	-- Fazer teste de mudar para yellow quando carrega no botão
  	-- Perguntar ao prof de qual é q tem de mudar para yellow
  );
  
end TestTrainLine